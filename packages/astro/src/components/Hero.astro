---
import type { TransformedStrapiImage } from "../data/image"
import type { StrapiImageData } from "../data/schema/strapi.schema"
import { encodeImageToBlurhashURL } from "../helpers/blurhash"

import LazyImage from "./lazy-image"
import NavBar from "./NavBar.astro"

export type Props = {
  logo: StrapiImageData
  image: TransformedStrapiImage
}

const { logo, image } = Astro.props as Props

const blurhash = await encodeImageToBlurhashURL(image)
---

<NavBar hideBackgroundOnTop logoUrl={logo.attributes.url} />
<header class="relative h-hero w-full bg-cover shadow-lg">
  <div class="absolute z-0 h-full w-full">
    <LazyImage
      blurhashConfig={blurhash}
      src={image.htmlImage.src || undefined}
      alt={image.htmlImage.alt || undefined}
      loading="eager"
      client:load
      style={{ filter: "brightness(70%)" }}
    />
  </div>
  <div class="absolute z-10 h-full w-full"></div>
</header>
