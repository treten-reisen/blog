---
import { config } from "@fortawesome/fontawesome-svg-core"
import "@fortawesome/fontawesome-svg-core/styles.css" // Import the CSS

import Footer from "../components/footer"
import Header from "../components/header"
import { getGlobal } from "../data/get-global"
import { getHero } from "../data/get-hero"
import "./layout.css"

config.autoAddCss = false // Tell Font Awesome to skip adding the CSS automatically since it's being imported above

export type Props = {
  noPadding?: boolean
  disableIndexing?: boolean
}

const { noPadding = false, disableIndexing = false } = Astro.props as Props

const global = await getGlobal()
const hero = await getHero()
---

<html class="flex h-full flex-col">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <meta name="robots" content={disableIndexing ? "noindex, nofollow" : "index, follow"} />
    <slot name="head" />
  </head>

  <body class="flex flex-shrink-0 flex-grow flex-col justify-between bg-gray-50 text-gray-900">
    <slot name="header">
      <Header logoUrl={hero.data.attributes.logo.data.attributes.url} />
    </slot>
    <main class:list={["flex-grow", { "md:container p-6 sm:p-responsive": !noPadding }]}>
      <slot />
    </main>
    <Footer socialMedia={global.data.attributes.socialMedia} />
    <script src="../index.ts"></script>
  </body>
</html>
